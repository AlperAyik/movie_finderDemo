(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function o(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=o(n);fetch(n.href,i)}})();const v="/movie_finderDemo/assets/maxresdefault-VQSKGbnC.jpg",y=document.getElementById("movie_info"),b=document.getElementById("movie_infoImg"),I=document.getElementById("movie_title"),L=document.getElementById("movie_type"),B=document.getElementById("movie_year"),T=document.getElementById("movie_rating"),p=document.getElementById("save_btn"),x=document.getElementById("close_btn"),w=document.getElementById("favorites_btn"),m=document.getElementById("favorites_count"),S=document.querySelectorAll("#filter_list li"),c=document.getElementById("searchbar_input"),C=document.getElementById("searchbar_btn"),M=document.getElementById("main_titleH1"),u=document.getElementById("card_section");let a=JSON.parse(localStorage.getItem("favorites_moviefinder"))||[],g;var N={distance:"150%",origin:"bottom",opacity:null};async function O(e){try{return await(await fetch(`https://www.omdbapi.com/?s=${e}&apikey=edb57393`)).json()}catch(t){_({type:t.type,msg:t.msg})}}async function l(e,t){let o;if(e===a)o=a,d("Favorite movies");else{d(`Discover ${t==="all"?"All":t}`);const r=c.value.toLowerCase().trim(),n=await O(r||"marvel");if(!n.Search){u.innerHTML="",d("No results"),_({type:"Search input",msg:"No results"});return}o=$(n,t)}k(o)}function $(e,t){const o=t.toLowerCase();return e.Search.filter(n=>n.Type===o||o==="all")}function k(e){u.innerHTML="",e.forEach(P)}function P(e){const{Poster:t,Title:o,Type:r,Year:n,imdbID:i}=e,s=document.createElement("div");s.classList.add("card"),s.innerHTML=`
    <div id="card">
    <img src="${t||v}" onerror="this.onerror=null; this.src='${v}'" id="movie_img">
    </div>
    `,s.addEventListener("click",()=>{document.body.style.overflow="hidden",y.showModal(),g=e,A(e)}),u.appendChild(s),ScrollReveal().reveal(s,N)}function D(e){const t=a.find(r=>r.Title===e.Title),o=a.findIndex(r=>r.imdbID===e.imdbID);t?a.splice(o,1):a.push(e),E(e),d(t?"Removing from favorites":"Saving to favorites"),l("","all"),localStorage.setItem("favorites_moviefinder",JSON.stringify(a))}function _(e){console.error(e)}function d(e){M.textContent=`${e}`}function h(){const e=a.length;e?(m.textContent=e,m.style.display="flex"):m.style.display="none"}function f(e){e==="dbclick"&&(c.value="",l("","all")),e!=""?(c.classList.remove("empty"),c.placeholder="Search for movies...",l("","all")):(c.placeholder="No search typed in",c.classList.add("empty"))}function E(e){const t=a.some(o=>o.Title===e.Title);p.textContent=t?"Remove":"Save"}function A(e){const{Poster:t,Title:o,Type:r,Year:n,imdbIDm:i,Rating:s}=e;b.src=t,I.textContent=o,L.textContent=`Type: ${r}`,B.textContent=`Year: ${n}`,T.textContent=`Rating: ${s||"No rating as of now"}`,E(e)}S.forEach(e=>{e.addEventListener("click",()=>{const t=e.textContent;l("",t)})});c.addEventListener("dblclick",()=>{f("dbclick")});c.addEventListener("keydown",e=>{e.key==="Enter"&&f(c.value.trim())});C.addEventListener("click",()=>{f(c.value.trim())});w.addEventListener("click",()=>{l(a,"all")});p.addEventListener("click",()=>{D(g),h(),document.body.style.overflow=""});x.addEventListener("click",()=>{document.body.style.overflow="",y.close()});h();l("","all");
